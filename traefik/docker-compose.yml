version: "3"
services:
   traefik:
     image: traefik:v2.5.4
     command:
      #- "--log.level=DEBUG"
      - "--api.insecure=true"
      - "--providers.docker=true"
      - "--providers.docker.exposedbydefault=false"
      - "--entrypoints.web.address=:80"
     volumes:
       - "/var/run/docker.sock:/var/run/docker.sock"
       - "./traefik/traefik.toml:/traefik.toml"
       - "./traefik/acme.json:/acme.json"
     ports:
       - '80:80'
       - '8080:8080' # Dashboard
     labels:
      - 'traefik.backend=traefik'
      - 'traefik.port=80'
      - 'traefik.frontend.rule=Host:local.traefik.com'
     restart: always
     container_name: traefik

networks:
  web:
    external: true
    name: network-web
  backend:
    name: network-backend